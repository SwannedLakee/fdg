     </tbody> 
    </table>
</div>

<script type="text/javascript" src="/assets/js/typeahead/bootstrap3-typeahead.min.js"></script>
    <script type='text/javascript'>
   $(document).ready(function() {
   var dataSrc = [];
   
     var filterValue = new URLSearchParams(window.location.search).get('f');
     
	 var table = $('#pali').DataTable({
	   'autoWidth': true,
	   'stateSave': true,
	   'paging'  : true,
	         "search": {
    "caseInsensitive": true,
        "smart": true
  },
	   "orderMulti": true,
	   'pageLength' : 28,
	   'lengthMenu' : [10, 28, 50, 100, 1000],
	   'responsive': true,
	    'colReorder': true,
	   'columnDefs': [
	            { type: "html", target: [0] },
	            { type: 'natural', targets: 2 }
					],
					
				
      'initComplete': function(){
         var api = this.api();
 
         // Populate a dataset for autocomplete functionality
         api.cells('tr', [0, 1, 2, 3]).every(function(){
            //var data = this.data().replace( /(<([^>]+)>)/ig, '');
            var data = $('<div>').html(this.data()).text();
          //  console.log(data);
            if(dataSrc.indexOf(data) === -1){ dataSrc.push(data); }
         });

         // Initialize Typeahead plug-in
         $('.dataTables_filter input[type="search"]', api.table().container())
            .typeahead({
              autoSelect: false,
               source: dataSrc,
               afterSelect: function(value){
                  api.search(value).draw();
               }
            }
         );
      }
   });			
          if (filterValue) {
        table.search(filterValue).draw();
        var currentUrl = new URL(window.location.href);
        currentUrl.searchParams.delete('f');
        history.replaceState({}, '', currentUrl);
}
    // Handle click on "Expand All" button
    $('#btn-show-all-children').on('click', function(){
        // Expand row details
        table.rows(':not(.parent)').nodes().to$().find('td:first-child').trigger('click');
    });
    // Handle click on "Collapse All" button
    $('#btn-hide-all-children').on('click', function(){
        // Collapse row details
        table.rows('.parent').nodes().to$().find('td:first-child').trigger('click');
    });
});
  </script>
  
    <script>

$(document).ready(function() {
    // Получаем параметр поиска из URL
    let params = new URLSearchParams(document.location.search);
    let finder = params.get("s");

    if (finder && finder.trim() !== "") {
        // Получаем таблицу DataTables по ее id
        var table = $('#pali').DataTable();

        // Получаем все строки таблицы
        table.rows().every(function(rowIdx, tableLoop, rowLoop) {
            // Получаем данные в текущей строке
            var rowData = this.data();

            // Проходим по каждому элементу данных в строке
            rowData.forEach(function(cellData, index) {

if ( index === 0) {

                    // Применяем регулярное выражение к содержимому ячейки и подсвечиваем совпадения
var regex = new RegExp(finder + '(?![^<]*>)', 'gi');
                   // var regex = new RegExp(finder, 'gi'); // 'gi' - игнорировать регистр
                    cellData = cellData.replace(regex, function(match) {
                        return '<b class="match finder">' + match + '</b>';
                    });

                    // Обновляем содержимое ячейки с примененной подсветкой
                    table.cell(rowIdx, index).data(cellData);
                }
            });
        });

        // Перерисовываем таблицу для применения изменений
        table.draw();
    }
});
  </script>
  <script src="/assets/js/themeswitch.js"></script>
        <script src="/assets/js/openFdg.js"></script>

</body>
</html>