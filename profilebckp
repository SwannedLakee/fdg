cd /data/data/com.termux/files/usr/share/apache2/default-site/htdocs

alias ll="ls -ahtr"
alias grep="grep --color"
alias scr="cd /storage/emulated/0/Dhamma/scripts"
alias fdg="cd /data/data/com.termux/files/home/fdg"
alias apa="cd /data/data/com.termux/files/usr/share/apache2/default-site/htdocs"
alias cdsutta="cd /data/data/com.termux/files/usr/share/apache2/default-site/htdocs/assets/texts/sutta/sn/sn47"
alias roottxt="cd /storage/emulated/0/Dhamma/suttacentral.net/sc-data/sc_bilara_data/root/pli/ms/sutta"
alias trntxt="cd /storage/emulated/0/Dhamma/suttacentral.net/sc-data/sc_bilara_data/translation/en/sujato/sutta"
alias out="cd /storage/emulated/0/Dhamma/output"
alias res="cd /storage/emulated/0/Dhamma/fdg/result"
alias all="cd /storage/emulated/0/Dhamma/output/allwords"
alias ssssh="ssh -tt a0902785@141.8.192.193"
alias asssh="ssh -i /data/data/com.termux/files/home/.ssh/Fdg2.pem  root@13.213.46.216"
alias rsssh="ssh -tt -p1000 root@94.126.201.8"
alias ksssh="ssh -tt -p1000 o561122122@94.126.201.8"
alias aksa="cd /data/data/com.termux/files/home/aksamukha ; source bin/activate"
alias dwnl="echo /storage/emulated/0/Download/"
alias sutta="cd /data/data/com.termux/files/usr/share/apache2/default-site/htdocs/suttacentral.net/sc-data/sc_bilara_data/root/pli/ms/sutta"
alias asset="cd /data/data/com.termux/files/usr/share/apache2/default-site/htdocs/assets/texts/sutta/"

function md5checkwrite {

var="$(cat)"
functionname=`echo $var | awk '{print $1}'`
functionfile=~/.shortcuts/${functionname}.sh 
content=`echo "$var" | awk 'NR!=1'`
#echo $functionfile $functionname
md5_stdin=$(echo "$content" | md5sum | cut -d" " -f 1)
md5_file=$(md5sum ${functionfile} | cut -d" " -f1)
[[ "$md5_stdin" != "$md5_file" ]] && echo "$content"  > $functionfile
}

functionname=grepallwords                 
finddhamma-nohup () {
cd /storage/emulated/0/Dhamma/fdg/result
nohup bash /storage/emulated/0/Dhamma/fdg/scripts/finddhamma.sh "$@" &
};

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash
#cd /storage/emulated/0/Dhamma/fdg/result
#bash /storage/emulated/0/Dhamma/fdg/scripts/finddhamma.sh \"\$@\"
#" | md5checkwrite

functionname=apaswitch 
function apaswitch {
bash ~/.shortcuts/apaswitch.sh
}

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash
curip=`ifconfig 2>/dev/null | grep inet | grep -v 127.0.0 | awk '{print $2}' | xargs`
echo \$curip
for ip in \$curip
do 
echo \$ip 
grep \$ip /data/data/com.termux/files/usr/etc/apache2/httpd.conf | grep ServerName
if [[ \$? == \"0\" ]]
then
echo \"\$ip added already\"
else 
echo -n
#add ip to httpd conf as a ServerName
#echo \"ServerName \$ip:8080 
#added by script\" >> /data/data/com.termux/files/usr/etc/apache2/httpd.conf
fi
done 

curl localhost:8080 > /dev/null 2>&1
if [[ \$? == \"0\" ]]
then
#echo stopping
#apachectl stop
echo already running

else 
echo starting
apachectl start
#am start --user 0 -n com.android.chrome/com.google.android.apps.chrome.Main
fi
termux-open-url http://localhost:8080/ru
sleep 2
" | md5checkwrite



#
functionname=findallSuttas-th
function find_in_all_Suttas-th.sh {
bash ~/.shortcuts/find_in_all_Suttas-th.sh
}

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash
cd /storage/emulated/0/Dhamma/output
bash /storage/emulated/0/Dhamma/scripts/find_in_all_Suttas-th.sh \$@
" | md5checkwrite 

functionname=grepallwords
grepallwords-nohup ()                                    {
cd /storage/emulated/0/Dhamma/output/  
nohup bash /storage/emulated/0/Dhamma/scripts/grepallwords.sh $@ &
}                                       

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash
cd /storage/emulated/0/Dhamma/output
bash /storage/emulated/0/Dhamma/scripts/grepallwords.sh \$@
" | md5checkwrite 


result.sh()                             
{
cd /storage/emulated/0/Dhamma/output/   
bash ./result.sh $@
}                                       


functionname=sshgrepallwords

function sshgrepallwords.sh {
ssh a0092061@f.dhamma.gift "( cd /home/a0092061/scripts ; bash /home/a0092061/scripts/grepallwords.sh $@ ) &>/dev/null & "

}


echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash

if [ $# -ne 0 ]
  then
        pattern=\"\$@\"
  else
        echo \"enter pattern\"
        read \"pattern\"
fi

ssh a0092061@f.dhamma.gift \"( cd /home/a0092061/scripts ; bash /home/a0092061/scripts/grepallwords.sh \$pattern ) &>/dev/null & \"

" | md5checkwrite 

functionname=sshresult

function sshresult.sh {
ssh -tt a0092061@f.dhamma.gift "cd /home/a0092061/output/ ; bash -i ./result.sh $@"
}

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash
ssh -tt a0092061@f.dhamma.gift \"cd /home/a0092061/output/ ; bash -i ./result.sh \$@\"

" | md5checkwrite 

functionname=sshfindallsuttas
function sshfindallsuttas.sh {
ssh a0092061@f.dhamma.gift "( cd /home/a0092061/scripts ; bash /home/a0092061/scripts/find_in_all_Suttas-th.sh $@ ) &>/dev/null &" 
}

echo "${functionname}
#!/data/data/com.termux/files/usr/bin/bash


if [ \$# -ne 0 ]
  then
        pattern=\"\$@\"
  else
        echo \"enter pattern\"
        read \"pattern\"
fi

ssh a0092061@f.dhamma.gift \"(cd /home/a0092061/scripts/ ; bash ./find_in_all_Suttas-th.sh \$pattern ) &>/dev/null &\"

" | md5checkwrite 




function sshpsls {
ssh a0092061@f.dhamma.gift " cd /home/a0092061/output; ls -atr |tail -n15 ; echo ; ps -ef| grep '.sh'  "
}

#git commit and push
functionname=z_commit_and_push 
function commit_and_push {
#cd /storage/emulated/0/Dhamma/scripts
git status 
read
git add . && git commit -a -m updates && git push
}

echo "${functionname}
cd /storage/emulated/0/Dhamma/scripts
git add . && git commit -a -m updates && git push
sleep 2
" | md5checkwrite

#rsync-lite
functionname=rsync-lite

echo "$functionname
#!/bin/bash

source /storage/emulated/0/Dhamma/scripts/script_config-termux.sh
#backup
#rsync -azP   --include="*.sh"  --include="*backup*" --exclude="*" \$user@\$host:\$sourcedir \$scriptdir

#outputs
rsync -azP  --exclude="nohup.out" --include="*"  \$user@\$host:\$serveroutputdir \$outputdir
" | md5checkwrite

#rsync
functionname=rsync

echo "$functionname
#!/bin/bash
source /storage/emulated/0/Dhamma/scripts/script_config-termux.sh

#backup
#rsync -azP   --include="*.sh"  --include="*backup*" --exclude="*" \$user@\$host:\$sourcedir \$scriptdir 

#outputs
rsync -azP    --exclude="nohup.out" \$user@\$host:\$serveroutputdir \$outputdir 
" | md5checkwrite



functionname=wordfind
function wordfind.sh {

cd /storage/emulated/0/Dhamma/output/allwords
grep --color=always $@ /storage/emulated/0/Dhamma/output/allwords/sutta_words.txt
}

echo "$functionname
#!/data/data/com.termux/files/usr/bin/bash

cd /storage/emulated/0/Dhamma/output/allwords
grep \$@ /storage/emulated/0/Dhamma/output/allwords/sutta_words.txt
" | md5checkwrite



functionname=backup
function backup.sh {
bash ~/.shortcuts/backup.sh
}

echo "$functionname
#!/data/data/com.termux/files/usr/bin/bash
source /storage/emulated/0/Dhamma/scripts/script_config-termux.sh
backupdir=/storage/emulated/0/Dhamma/scripts/
shortcutdir=/data/data/com.termux/files/home/.shortcuts

backupfile=/storage/emulated/0/Dhamma/scripts/profile_termux_backup
sorcefile=~/.profile

echo -n backup

md5_stdin=\$( md5sum \$backupfile | cut -d\" \" -f 1)
md5_file=\$(md5sum \${sorcefile} | cut -d\" \" -f1)
if [[ \"\$md5_stdin\" != \"\$md5_file\" ]] 
then  
cp ~/.profile  /storage/emulated/0/Dhamma/scripts/profile_termux_backup

#backup
rsync -azP --include=\"/storage/emulated/0/Dhamma/scripts/profile_termux_backup\" --exclude=\"*\" \$scriptdir \$user@\$host:\$sourcedir 

fi

ssh a0092061@f.dhamma.gift \"cat ~/.bash_profile\" > /storage/emulated/0/Dhamma/scripts/profile_server_backup

echo ' done'
sleep 2
" | md5checkwrite



functionname=restore
function restore.sh {
bash ~/.shortcuts/restore.sh
}

echo "$functionname
#!/data/data/com.termux/files/usr/bin/bash
backupdir=/storage/emulated/0/Dhamma/scripts/
shortcutdir=/data/data/com.termux/files/home/.shortcuts

# cd $backupdir
# for file in \`ls *_shortcut_backup\`
# do
# echo $file
# name=` echo $file |  sed 's@_shortcut_backup@@g' `
# cp ${file} $shortcutdir/$name
# done

echo -n $functionname
backupfile=/storage/emulated/0/Dhamma/scripts/profile_termux_backup
restorefile=~/.profile

md5_stdin=\$( md5sum \${backupfile} | cut -d\" \" -f 1)
md5_file=\$(md5sum \${restorefile} | cut -d\" \" -f1)
[[ \"\$md5_stdin\" != \"\$md5_file\" ]] && cp  /storage/emulated/0/Dhamma/scripts/profile_termux_backup ~/.profile
echo ' done'

sleep 2
exit 0

" | md5checkwrite

#git pull
functionname=pull
function pull {
cd /storage/emulated/0/Dhamma/scripts
git pull
restore.sh
}

echo "${functionname}
cd /storage/emulated/0/Dhamma/scripts
git pull
bash ~/.shortcuts/restore.sh

sleep 2
" | md5checkwrite 


functionname=sshcommit
function sshcommit {
ssh -p1000 root@94.126.201.8 "cd /var/www/html
git status
read
git add --all
git commit -a -m "message $@"
git push"
}      


echo "${functionname}
ssh -p1000 root@94.126.201.8 \"cd /var/www/html	
git status
read
git add --all
git commit -a -m \\\"message \$@\\\"
git push
read\"
" | md5checkwrite


functionname=sshpull
function sshpull {
echo "server kz"
ssh -p1000 root@94.126.201.8 "cd /var/www/html 
git pull 
echo
echo audio
echo
cd assets/audio
git pull"
}

echo "${functionname}
echo 'server kz'
ssh -p1000 root@94.126.201.8 \"cd /var/www/html
git pull
echo                                                            echo audio
echo
cd assets/audio
git pull
" | md5checkwrite

alias comsshpull="commit_and_push && sshpull"
alias sclpull="sshcommit && git pull"
function awkit {
echo awk -F'/' '{print $'$1' }' \| sed 's@_@@g'
}


alias gitall="git pull ; yes '' | commit_and_push ; sshpull ; ssh -p1000 root@94.126.201.8 'cd /var/www/html ; bash scripts/checknewlinebylineinscrepo.sh' ; yes '' | sshcommit ; git pull"

export PATH=$PATH:/data/data/com.termux/files/usr/share/apache2/default-site/htdocs/scripts


#alias miss='apa 2>&1 >/dev/null ; bash  scripts/mvNewTextsFromDownloads.sh; bash ./scripts/missingtranslations.sh an5; git pull; cd - 2>&1 >/dev/null'

function miss() {
if [[ "$@" == "" ]]
then
args="sn47 -o"
else
args="$@"
fi
apa 2>&1>/dev/null
bash  scripts/mvNewTextsFromDownloads.sh
bash ./scripts/missingtranslations.sh $args
git pull
cd - 2>&1>/dev/null
}

function catjq() {
cat $1 | jq -r '.[]'
}

apachectl start

function replacer() {
sed -i 's/памятования/памятования/g' *
sed -i 's/памятующий/памятующий/g' *
sed -i 's/почтенный/почтенный/g' *
sed -i 's/наблюден/наблюден/g' *
sed -i 's/товарищ/товарищ/g' *
sed -i 's/товарищи/товарищи/g' *
sed -i 's/памятующи/памятующи/g' *
sed -i 's/сознатель/сознатель/g' *
}

function checker() {
apa; bash scripts/checknewlinebylineinscrepo.sh | grep -v done ; cd - >/dev/null
}
