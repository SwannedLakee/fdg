
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="/assets/img/favico-noglass.png" />
  <title>Преобразование текста для запоминания</title>
  <!-- Подключение Bootstrap CSS -->
    <!-- Подключение Bootstrap 5 CSS -->
    <link href="/assets/css/styles.css" rel="stylesheet" />
    <link href="/assets/css/extrastyles.css" rel="stylesheet" />
</head>
<body>
      <div class="container mt-3">
        <div class="align-items-center align-items-center toggle-switch input-group-append">
            <div id="" class="input-group">
                <a href="/ru/read.php" title="Sutta and Vinaya reading" rel="noreferrer" class="me-1">
                    <svg fill="#979797" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="26px" viewBox="0 0 547.596 547.596" xml:space="preserve" stroke="#979797"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round" stroke="#CCCCCC" stroke-width="3.285576"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M540.76,254.788L294.506,38.216c-11.475-10.098-30.064-10.098-41.386,0L6.943,254.788 c-11.475,10.098-8.415,18.284,6.885,18.284h75.964v221.773c0,12.087,9.945,22.108,22.108,22.108h92.947V371.067 c0-12.087,9.945-22.108,22.109-22.108h93.865c12.239,0,22.108,9.792,22.108,22.108v145.886h92.947 c12.24,0,22.108-9.945,22.108-22.108v-221.85h75.965C549.021,272.995,552.081,264.886,540.76,254.788z"></path> </g> </g></svg>
                </a>

                <a href="/ru" title="Sutta and Vinaya search" rel="noreferrer" class="me-1">
                    <img width="24px" alt="find.dhamma.gift icon" src="/assets/img/gray-white.png">
                </a>

                <div class="ms-1 form-check form-switch">
                    <input type="checkbox" class="form-check-input" id="darkSwitch">
                </div>
            </div>
        </div>
    </div>
    <div class="container mt-1">
        <div class="row ">
            <div class="col-12 text-center">
                <h1 class="mb-4">Мнемотехника</h1>
                <textarea id="inputText" class="form-control mb-3 inputdiv" rows="10" placeholder="Введите текст"></textarea>
             <!--   <div class="form-check"> 
                    <input type="checkbox" class="form-check-input" id="checkbox1">
                    <label class="form-check-label" for="checkbox1">Фича 1</label>
                </div>
                <div class="form-check"> 
                    <input type="checkbox" class="form-check-input" id="checkbox2">
                    <label class="form-check-label" for="checkbox2">Фича 2</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="checkbox3">
                    <label class="form-check-label" for="checkbox3">Фича 3</label>
                </div> -->
<button class="btn btn-primary mt-3" onclick="преобразоватьТекст()">Преобразовать</button>
<button class="btn btn-secondary mt-3" onclick="очистить()">Очистить</button>
<button class="btn btn-success mt-3" onclick="копироватьРезультат()">Копировать</button>
<button type="button" class="btn btn-primary mt-3" data-bs-toggle="collapse" data-bs-target="#linkList" aria-expanded="false">
        Ссылки
    </button>
    <div class="collapse mt-2" id="linkList">
        <ul class="list-group">
            <li class="list-group-item"><a href="/ru/assets/texts/pm.php">Bhikkhupātimokkha</a></li>
            <li class="list-group-item"><a href="/ru/assets/texts/bipm.php">Bhikkhunīpātimokkha</a></li>
            <li class="list-group-item"><a href="/ru/assets/materials/prat.html">Dhamma.ru Патимоккха</a></li>
            <li class="list-group-item"><a href="/bw/vi/vi.html#content">TBW Патимоккха</a></li>
            <li class="list-group-item"><a href="/accesstoinsight.org/tipitaka/vin/sv/index.html">ATI Патимоккха</a></li>
        </ul>
    </div>
    
    
   <div class="modal fade" id="copyPopup" tabindex="-1" role="dialog" aria-labelledby="copyPopupLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-body">
                Результат скопирован в буфер обмена!
            </div>
        </div>
    </div>
</div>
             
                <div class="mt-4">
              <h3>
              Результат:   
              </h3>     
<div id="результат" class="display-7 mb-5"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
function преобразоватьТекст() {
    const входнойТекст = document.getElementById("inputText").value;

    localStorage.setItem("входнойТекст", входнойТекст);

    // Разбиваем текст на строки
    const строкиСКавычками = входнойТекст.split('\n');

const строки = строкиСКавычками.map(строка => {
    return строка.replace(/[—"'“]/g, '');
});

    const результат = строки.map(строка => {
        // Разбиваем каждую строку на слова
        const слова = строка.split(/\s+/);
        
        // Преобразуем каждое слово в первую букву или пустую строку
const преобразованныеСлова = слова.map(word => {
    const перваяБуква = word.match(/^\p{L}/u); // Используйте \p{L} для букв из разных языков
    if (перваяБуква) {
        return перваяБуква[0];
    } else {
        const диакритическиеСимволы = word.match(/^[\p{M}\p{N}\p{S}\p{P}]/u);
        return диакритическиеСимволы ? диакритическиеСимволы[0] : '';
    }
});


        // Объединяем преобразованные слова снова в строку
        return преобразованныеСлова.join(' ');
    }).join('\n'); // Объединяем строки с переносами

    document.getElementById("результат").innerText = результат;

    // Сохраняем результат в Local Storage
    localStorage.setItem("результат", результат);
}

    
window.addEventListener('load', function () {
    const входнойТекст = localStorage.getItem("входнойТекст");
    const результат = localStorage.getItem("результат");

    if (входнойТекст) {
        document.getElementById("inputText").value = входнойТекст;
    }

    if (результат) {
        document.getElementById("результат").innerText = результат;
    }
});

function очистить() {
    // Очищаем поле ввода и результат
    document.getElementById("inputText").value = "";
    document.getElementById("результат").innerText = "";

    // Очищаем данные в Local Storage
    localStorage.removeItem("входнойТекст");
    localStorage.removeItem("результат");
}

function копироватьРезультат() {
    const результат = document.getElementById("результат").innerText;

    if (результат) {
        // Create a temporary textarea element to hold the result text
        const tempTextarea = document.createElement("textarea");
        tempTextarea.value = результат;

        // Append the textarea to the document
        document.body.appendChild(tempTextarea);

        // Select and copy the text
        tempTextarea.select();
        document.execCommand("copy");

        // Remove the temporary textarea
        document.body.removeChild(tempTextarea);

        // Show the copy success popup
        $('#copyPopup').modal('show');
    }
}

    </script>
    
        <!-- Подключение Bootstrap 5 JS (необходим для работы кнопки и collapse) -->
    <script src="/assets/js/bootstrap.bundle.5.3.1.min.js"></script>
    <script src="/assets/js/dark-mode-switch/dark-mode-switch.js"></script>
    
</body>
</html>
